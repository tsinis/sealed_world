{
  "format_version": 2,
  "sksl": {
    "entrypoint": "waved_flag_fragment_main",
    "shader": "// This SkSL shader is autogenerated by spirv-cross.\n\nfloat4 flutter_FragCoord;\n\nuniform vec2 uSize;\nuniform float uTime;\nuniform float uAnimationSpeed;\nuniform float uWaveAmplitude;\nuniform float uWaveFrequency;\nuniform float uWavePhaseShift;\nuniform float uSecondaryAmp;\nuniform float uSecondaryFreq;\nuniform float uLeftEdgePinned;\nuniform float uRightEdgePinned;\nuniform float uPinSoftness;\nuniform float uPoleMargin;\nuniform float uShadingEnabled;\nuniform float uFoldStrength;\nuniform float uHighlightStrength;\nuniform float uShadowStrength;\nuniform float uSheenStrength;\nuniform float uSheenFrequency;\nuniform float uPerspective;\nuniform float uSeed;\nuniform float uWaveDirX;\nuniform float uWaveDirY;\nuniform float uTurbulence;\nuniform float uFabricVisibility;\nuniform shader uTexture;\nuniform half2 uTexture_size;\n\nvec4 fragColor;\n\nvec2 FLT_flutter_local_FlutterFragCoord()\n{\n    return flutter_FragCoord.xy;\n}\n\nvec2 FLT_flutter_local_waveDir()\n{\n    vec2 d = vec2(uWaveDirX, uWaveDirY);\n    float len = length(d);\n    vec2 _231;\n    if (len > 0.001000000047497451305389404296875)\n    {\n        _231 = d / vec2(len);\n    }\n    else\n    {\n        _231 = vec2(1.0, 0.0);\n    }\n    return _231;\n}\n\nfloat FLT_flutter_local_hemMask(float v)\n{\n    return smoothstep(0.0199999995529651641845703125, 0.100000001490116119384765625, v) * smoothstep(0.0199999995529651641845703125, 0.100000001490116119384765625, 1.0 - v);\n}\n\nfloat FLT_flutter_local_edgeRamp(float u)\n{\n    float r = 1.0;\n    if (uLeftEdgePinned > 0.5)\n    {\n        r *= smoothstep(uPoleMargin, uPoleMargin + uPinSoftness, u);\n    }\n    if (uRightEdgePinned > 0.5)\n    {\n        r *= smoothstep(uPoleMargin, uPoleMargin + uPinSoftness, 1.0 - u);\n    }\n    return r;\n}\n\nfloat FLT_flutter_local_borderMask(vec2 uv)\n{\n    return min(uv.x * (1.0 - uv.x), uv.y * (1.0 - uv.y)) * 4.0;\n}\n\nfloat FLT_flutter_local_hash(inout vec2 p)\n{\n    p += vec2(uSeed * 17.3099994659423828125, uSeed * 23.1700000762939453125);\n    return fract(sin(dot(p, vec2(127.09999847412109375, 311.70001220703125))) * 43758.546875);\n}\n\nfloat FLT_flutter_local_noise(vec2 p)\n{\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n    vec2 u = (f * f) * (vec2(3.0) - (f * 2.0));\n    vec2 param = i;\n    float _130 = FLT_flutter_local_hash(param);\n    vec2 param_1 = i + vec2(1.0, 0.0);\n    float _137 = FLT_flutter_local_hash(param_1);\n    vec2 param_2 = i + vec2(0.0, 1.0);\n    float _147 = FLT_flutter_local_hash(param_2);\n    vec2 param_3 = i + vec2(1.0);\n    float _152 = FLT_flutter_local_hash(param_3);\n    return mix(mix(_130, _137, u.x), mix(_147, _152, u.x), u.y);\n}\n\nfloat FLT_flutter_local_fbm2(vec2 p)\n{\n    float value = 0.0;\n    float amp = 0.5;\n    vec2 param = p;\n    value += (amp * FLT_flutter_local_noise(param));\n    amp *= 0.5;\n    vec2 param_1 = p * 2.0;\n    value += (amp * FLT_flutter_local_noise(param_1));\n    return value;\n}\n\nfloat FLT_flutter_local_organicWave(vec2 uv, float baseArg, float turb, float time)\n{\n    float wave = sin(baseArg);\n    if (turb < 0.0199999995529651641845703125)\n    {\n        return wave;\n    }\n    vec2 noisePos = (uv * 3.0) + vec2(time * 0.300000011920928955078125, time * 0.20000000298023223876953125);\n    vec2 param = noisePos * 0.699999988079071044921875;\n    float freqNoise = (FLT_flutter_local_noise(param) * 2.0) - 1.0;\n    float modulatedArg = baseArg + ((turb * freqNoise) * 1.5);\n    vec2 param_1 = (noisePos * 1.2999999523162841796875) + vec2(100.0);\n    float ampNoise = FLT_flutter_local_noise(param_1);\n    float ampMod = 1.0 + ((turb * (ampNoise - 0.5)) * 0.800000011920928955078125);\n    wave = sin(modulatedArg) * ampMod;\n    float h1 = sin((modulatedArg * 2.099999904632568359375) + 0.800000011920928955078125) * 0.3499999940395355224609375;\n    float h2 = sin((modulatedArg * 3.2999999523162841796875) + 1.60000002384185791015625) * 0.1500000059604644775390625;\n    wave += (turb * (h1 + h2));\n    vec2 param_2 = noisePos * 0.5;\n    float drift = (FLT_flutter_local_fbm2(param_2) * 2.0) - 1.0;\n    wave += ((turb * drift) * 0.4000000059604644775390625);\n    return wave / (1.0 + (turb * 0.699999988079071044921875));\n}\n\nfloat FLT_flutter_local_organicDeriv(vec2 uv, float baseArg, float turb, float time)\n{\n    float d = cos(baseArg);\n    if (turb < 0.0199999995529651641845703125)\n    {\n        return d;\n    }\n    vec2 noisePos = (uv * 3.0) + vec2(time * 0.300000011920928955078125, time * 0.20000000298023223876953125);\n    vec2 param = noisePos * 0.699999988079071044921875;\n    float freqNoise = (FLT_flutter_local_noise(param) * 2.0) - 1.0;\n    float modulatedArg = baseArg + ((turb * freqNoise) * 1.5);\n    vec2 param_1 = (noisePos * 1.2999999523162841796875) + vec2(100.0);\n    float ampNoise = FLT_flutter_local_noise(param_1);\n    float ampMod = 1.0 + ((turb * (ampNoise - 0.5)) * 0.800000011920928955078125);\n    d = cos(modulatedArg) * ampMod;\n    d += (((turb * 0.3499999940395355224609375) * 2.099999904632568359375) * cos((modulatedArg * 2.099999904632568359375) + 0.800000011920928955078125));\n    d += (((turb * 0.1500000059604644775390625) * 3.2999999523162841796875) * cos((modulatedArg * 3.2999999523162841796875) + 1.60000002384185791015625));\n    return d / (1.0 + (turb * 0.699999988079071044921875));\n}\n\nvec3 FLT_flutter_local_computeWave(vec2 uv, float phase, vec2 dir, float time)\n{\n    float param = uv.x;\n    float ramp = FLT_flutter_local_edgeRamp(param);\n    vec2 param_1 = uv;\n    float border = FLT_flutter_local_borderMask(param_1);\n    float param_2 = uv.y;\n    float hem = FLT_flutter_local_hemMask(param_2);\n    float sPhase = (uSeed * 6.283185482025146484375) + uWavePhaseShift;\n    float k = 6.283185482025146484375 * uWaveFrequency;\n    float baseArg = ((k * dot(uv, dir)) - phase) + sPhase;\n    float localTurb = (uTurbulence * mix(0.300000011920928955078125, 1.0, hem)) * mix(0.5, 1.0, border);\n    vec2 param_3 = uv;\n    float param_4 = baseArg;\n    float param_5 = localTurb;\n    float param_6 = time;\n    float wave = FLT_flutter_local_organicWave(param_3, param_4, param_5, param_6);\n    vec2 param_7 = uv;\n    float param_8 = baseArg;\n    float param_9 = localTurb;\n    float param_10 = time;\n    float deriv = FLT_flutter_local_organicDeriv(param_7, param_8, param_9, param_10);\n    vec2 param_11 = (uv * 2.0) + vec2(time * 0.5);\n    float secOffset = FLT_flutter_local_noise(param_11) * 0.5;\n    float secArg = (((6.283185482025146484375 * uSecondaryFreq) * (uv.x + (uv.y * 0.300000011920928955078125))) - (phase * 1.2999999523162841796875)) + secOffset;\n    float sec = sin(secArg);\n    float total = (uWaveAmplitude * wave) + (uSecondaryAmp * sec);\n    vec2 ortho = vec2(-dir.y, dir.x);\n    vec2 disp = (ortho * (ramp * total)) * mix(0.800000011920928955078125, 1.0, hem);\n    disp.x *= border;\n    float slope = (((ramp * uWaveAmplitude) * k) * deriv) * mix(0.75, 1.0, hem);\n    return vec3(disp, slope);\n}\n\nvec2 FLT_flutter_local_warpUV(vec2 uv, float phase, vec2 dir, float time, out float slope)\n{\n    vec2 param = uv;\n    float param_1 = phase;\n    vec2 param_2 = dir;\n    float param_3 = time;\n    vec3 wave = FLT_flutter_local_computeWave(param, param_1, param_2, param_3);\n    slope = wave.z;\n    vec2 param_4 = uv;\n    float border = FLT_flutter_local_borderMask(param_4);\n    float param_5 = uv.y;\n    float hem = FLT_flutter_local_hemMask(param_5);\n    float persp = 1.0;\n    if ((uPerspective > 0.0) && (uLeftEdgePinned > 0.5))\n    {\n        persp = 1.0 - ((uv.x * uPerspective) * 0.100000001490116119384765625);\n    }\n    float fold = ((((wave.y * uFoldStrength) * 0.300000011920928955078125) * persp) * border) * mix(0.60000002384185791015625, 1.0, hem);\n    vec2 warped = vec2((uv.x + fold) + wave.x, uv.y - wave.y);\n    return clamp(warped, vec2(0.001000000047497451305389404296875), vec2(0.999000012874603271484375));\n}\n\nfloat FLT_flutter_local_fbm3(vec2 p)\n{\n    float value = 0.0;\n    float amp = 0.5;\n    vec2 param = p;\n    value += (amp * FLT_flutter_local_noise(param));\n    amp *= 0.5;\n    vec2 param_1 = p * 2.0;\n    value += (amp * FLT_flutter_local_noise(param_1));\n    amp *= 0.5;\n    vec2 param_2 = p * 4.0;\n    value += (amp * FLT_flutter_local_noise(param_2));\n    return value;\n}\n\nfloat FLT_flutter_local_fabric(vec2 uv)\n{\n    vec2 param = uv * 8.0;\n    float cotton = FLT_flutter_local_fbm3(param);\n    vec2 t = uv * 55.0;\n    float warp = abs((fract(t.x) * 2.0) - 1.0);\n    float weft = abs((fract(t.y + (0.5 * floor(mod(t.x, 2.0)))) * 2.0) - 1.0);\n    float weave = (warp + weft) * 0.5;\n    float f = mix(cotton, weave, 0.300000011920928955078125);\n    return 1.0 - (0.07999999821186065673828125 * (1.0 - f));\n}\n\nvec3 FLT_flutter_local_light(vec3 color, float slope, vec2 uv, float phase, float fabricMask, float hem)\n{\n    if (uShadingEnabled < 0.5)\n    {\n        return color;\n    }\n    vec3 N = normalize(vec3((-slope) * 2.5, 0.0, 1.0));\n    float diff = max(dot(N, vec3(0.370999991893768310546875, 0.4639999866485595703125, 0.742999970912933349609375)), 0.0);\n    float wrap = min(diff + 0.300000011920928955078125, 1.0);\n    float extraShadow = 1.0 - ((1.0 - wrap) * mix(0.3499999940395355224609375, 0.60000002384185791015625, hem));\n    float fullShade = wrap * extraShadow;\n    float shadeFactor = mix(1.0, fullShade, uShadowStrength);\n    float hi = (((uHighlightStrength * diff) * diff) * 0.300000011920928955078125) * fabricMask;\n    float sheenArg = ((uv.x + uv.y) * uSheenFrequency) - (phase * 0.3499999940395355224609375);\n    float sheen = uSheenStrength * (0.5 + (0.5 * sin(sheenArg)));\n    sheen *= ((((1.0 - N.z) * 0.25) * fabricMask) * hem);\n    return clamp(((color * shadeFactor) + vec3(hi)) + vec3(sheen), vec3(0.0), vec3(1.0));\n}\n\nvoid FLT_main()\n{\n    vec2 uv_1 = FLT_flutter_local_FlutterFragCoord() / uSize;\n    vec2 dir = FLT_flutter_local_waveDir();\n    float time = uTime * uAnimationSpeed;\n    float phase_1 = time * 6.283185482025146484375;\n    float param = uv_1.y;\n    float hem_1 = FLT_flutter_local_hemMask(param);\n    float slope_1 = 0.0;\n    vec2 param_1 = uv_1;\n    float param_2 = phase_1;\n    vec2 param_3 = dir;\n    float param_4 = time;\n    float param_5;\n    vec2 _872 = FLT_flutter_local_warpUV(param_1, param_2, param_3, param_4, param_5);\n    slope_1 = param_5;\n    vec2 warped = _872;\n    vec4 tex = uTexture.eval(uTexture_size * ( warped));\n    float fabricMask_1 = 1.0;\n    if (uFabricVisibility > 0.00999999977648258209228515625)\n    {\n        vec2 param_6 = warped;\n        float f = FLT_flutter_local_fabric(param_6);\n        float lum = dot(tex.xyz, vec3(0.2989999949932098388671875, 0.58700001239776611328125, 0.114000000059604644775390625));\n        float protection = smoothstep(0.85000002384185791015625, 1.0, lum);\n        vec4 _911 = tex;\n        vec3 _913 = _911.xyz * mix(mix(1.0, f, uFabricVisibility), 1.0, protection);\n        tex.x = _913.x;\n        tex.y = _913.y;\n        tex.z = _913.z;\n        fabricMask_1 = mix(0.4000000059604644775390625, 0.949999988079071044921875, f);\n    }\n    fabricMask_1 *= mix(0.5, 1.0, hem_1);\n    vec3 param_7 = tex.xyz;\n    float param_8 = slope_1;\n    vec2 param_9 = uv_1;\n    float param_10 = phase_1;\n    float param_11 = fabricMask_1;\n    float param_12 = hem_1;\n    vec3 lit = FLT_flutter_local_light(param_7, param_8, param_9, param_10, param_11, param_12);\n    fragColor = vec4(lit * tex.w, tex.w);\n}\n\nhalf4 main(float2 iFragCoord)\n{\n      flutter_FragCoord = float4(iFragCoord, 0, 0);\n      FLT_main();\n      return fragColor;\n}\n",
    "stage": 1,
    "uniforms": [
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 0,
        "name": "uSize",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 0,
        "columns": 1,
        "location": 1,
        "name": "uTexture",
        "rows": 1,
        "type": 12
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 2,
        "name": "uTime",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 3,
        "name": "uAnimationSpeed",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 4,
        "name": "uWaveAmplitude",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 5,
        "name": "uWaveFrequency",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 6,
        "name": "uWavePhaseShift",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 7,
        "name": "uSecondaryAmp",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 8,
        "name": "uSecondaryFreq",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 9,
        "name": "uLeftEdgePinned",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 10,
        "name": "uRightEdgePinned",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 11,
        "name": "uPinSoftness",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 12,
        "name": "uPoleMargin",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 13,
        "name": "uShadingEnabled",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 14,
        "name": "uFoldStrength",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 15,
        "name": "uHighlightStrength",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 16,
        "name": "uShadowStrength",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 17,
        "name": "uSheenStrength",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 18,
        "name": "uSheenFrequency",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 19,
        "name": "uPerspective",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 20,
        "name": "uSeed",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 21,
        "name": "uWaveDirX",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 22,
        "name": "uWaveDirY",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 23,
        "name": "uTurbulence",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 24,
        "name": "uFabricVisibility",
        "rows": 1,
        "type": 10
      }
    ]
  }
}